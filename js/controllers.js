angular.module("controllers",['ngRoute','ui.bootstrap']).controller('mainController',['$scope','$routeParams','modelService','$location','$timeout',function($scope,$routeParams,modelService,$location,$timeout){$scope.activeLink=function(value){if(value==$routeParams.val1){return true;}};$scope.date=new Date();var lang='pt_bra';var mark='bra';var templateModel=modelService.models(mark,lang,'template');templateModel.get(function(data){$scope.template=data.template;});if($routeParams.val1){switch($routeParams.val1){case"joinAndSave":$scope.currentContInclude={"url":"partials/joinAndSave.html"};contentModel=modelService.models(mark,lang,'content');contentModel.get(function(data){$scope.content=data.content;});break;case"diyGrid":$scope.currentContInclude={"url":"partials/diyGrid.html"};contentModel=modelService.models(mark,lang,'content');contentModel.get(function(data){$scope.content=data.content;});break;case"essentialOils101":$scope.currentContInclude={"url":"partials/essentialOils101.html"};contentModel=modelService.models(mark,lang,'content');contentModel.get(function(data){$scope.dist_id=localStorage.distId;$scope.content=data.content;});break;case"recipesGrid":$scope.currentContInclude={"url":"partials/recipesGrid.html"};contentModel=modelService.models(mark,lang,'content');contentModel.get(function(data){$scope.content=data.content;});break;case"contactUs":$scope.currentContInclude={"url":"partials/contactUs.html"};contentModel=modelService.models(mark,lang,'content');contentModel.get(function(data){$scope.content=data.content;});$scope.form={};$scope.submit=function(){var postData=modelService.buildMessage($scope.form,$scope.content.pages.contactUs.message);modelService.sendForm(postData).success(function(data,status,headers,config,statusText){if(data.SUCCESS){$scope.verificationMessage={"text":"Obrigado; seu e-mail foi enviado."};$timeout(function(){$location.path('/')},3000);}else{console.log(data);$scope.verificationMessage={"text":"Parece que algo saiu errado; tente novamente e, se o problema persistir, entre em contato com service@doterra.com e informe erro 2."};}}).error(function(){$scope.verificationMessage={"text":"Parece que algo saiu errado; tente novamente e, se o problema persistir, entre em contato com service@doterra.com e informe erro 1."};});};break;default:}}else{$scope.currentContInclude={"url":"partials/home.html"};var contentModel=modelService.models(mark,lang,'content');contentModel.get(function(data){$scope.content=data.content;});}}]).controller("ModalCtrl",['$scope','$modal',function($scope,$modal){$scope.open=function(youtubeId,autoplay){$scope.youtubeId=youtubeId;$scope.autoplay=autoplay;$modal.open({templateUrl:'modalContent.html',controller:'ModalInstanceCtrl',resolve:{youtubeId:function(){return $scope.youtubeId;},autoplay:function(){return $scope.autoplay;}}});};}]).controller('ModalInstanceCtrl',['$scope','$modalInstance','youtubeId','autoplay',function($scope,$modalInstance,youtubeId,autoplay){$scope.youtubeId=youtubeId;$scope.autoplay=autoplay;$scope.cancel=function(){$modalInstance.dismiss('cancel');};}]);